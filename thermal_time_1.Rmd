---
title: "Thermal time"
author: "Sara DeLaurentis"
date: "2/1/2022"
output: html_document
purpose: tabulate (and plot?) thermal time for Itasca Project
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(stringi)
library(stringr)
library(dplyr)
library(ggplot2)
library(purrr)

library(nlme)
library(car)



```

## R Markdown


```{r }

temps <- read.csv("C2A_R3_m0surf_i39_2020.csv")
head(temps)
temps$longdate <- as.POSIXct(temps$longdate)

temps <- temps %>% 
  group_by(longdate) %>% 
  mutate(daily_avg = mean(value)) %>% 
  distinct(longdate, .keep_all = TRUE)
head(temps)



plot(daily_avg ~ longdate, data = temps)
#developing thermal time code section

#sum(df$column == value, na.rm=TRUE)

sum(temps$value >= 0, na.rm=TRUE)



```

##Linear model practice


```{r }


fm1 <- lm(daily_avg ~ longdate, data = temps) #daily avg as a function of date
summary(fm1) 
plot(daily_avg ~ longdate, data = temps)
lines(fitted.values(fm1))
residualPlot(fm1)

durbinWatsonTest(fm1)



fm2 <- lm(daily_avg ~ longdate + treatment, data = temps)


```
```{r }

csv_files <- list.files(pattern = ".csv", full.names = TRUE)
head(csv_files)

merged_ibuttons <- map_dfr(csv_files, read.csv) #map_dfr reads csv files and joins them by rowbind.
head(merged_ibuttons)
str(merged_ibuttons)

write.csv(merged_ibuttons, file = "merged_ibuttons.csv")


```
